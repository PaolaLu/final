{"ast":null,"code":"import custom_axios from '../plugins/axios.js';\nexport default {\n  props: {\n    aula: {\n      type: Object,\n      default: () => ({\n        id: \"\",\n        descripcion: \"\",\n        ubicacion: \"\",\n        cant_pcs: \"\",\n        cant_proyector: \"\",\n        es_climatizada: null,\n        aforo: \"\"\n      })\n    },\n    editar: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      valid: false,\n      aulaData: {\n        descripcion: \"\",\n        ubicacion: \"\",\n        cant_pcs: \"\",\n        cant_proyector: \"\",\n        es_climatizada: null,\n        aforo: \"\"\n      },\n      descripcionRules: [v => !!v || 'La descripción es obligatoria', v => v && v.length <= 100 || 'La descripción debe tener menos de 100 caracteres'],\n      ubicacionRules: [v => !!v || 'La ubicación es obligatoria', v => v && v.length <= 100 || 'La ubicación debe tener menos de 100 caracteres'],\n      cant_pcsRules: [v => !!v || 'La cantidad de PCs es obligatoria', v => v >= 0 || 'La cantidad debe ser un número positivo'],\n      cant_proyectorRules: [v => !!v || 'La cantidad de proyectores es obligatoria', v => v >= 0 || 'La cantidad debe ser un número positivo'],\n      es_climatizadaRules: [v => v !== null || 'Debes seleccionar si es climatizada o no'],\n      aforoRules: [v => !!v || 'El aforo es obligatorio', v => v > 0 || 'El aforo debe ser mayor que cero']\n    };\n  },\n  watch: {\n    aula: {\n      handler(nuevoValor) {\n        this.aulaData = {\n          ...nuevoValor\n        };\n        if (this.editar) {\n          this.$nextTick(() => {\n            if (this.$refs.form) {\n              this.$refs.form.validate();\n            }\n          });\n        }\n      },\n      immediate: true,\n      deep: true\n    }\n  },\n  methods: {\n    submit() {\n      if (this.$refs.form.validate()) {\n        if (this.editar) {\n          this.editarAula();\n        } else {\n          this.guardarAula();\n        }\n      }\n    },\n    guardarAula() {\n      custom_axios.post(\"/apiv1/aula\", this.aulaData).then(response => {\n        console.log('Aula guardada:', response.data);\n        this.$emit(\"guardar\", {\n          aula: response.data,\n          esNueva: true\n        });\n      }).catch(error => {\n        console.error('Error al guardar el aula:', error);\n        this.$emit(\"error\", \"Error al guardar el aula: \" + (error.response?.data?.message || error.message));\n      });\n    },\n    editarAula() {\n      custom_axios.patch(`/apiv1/aula/${this.aula.id}`, this.aulaData).then(response => {\n        console.log('Aula editada:', response.data);\n        this.$emit(\"guardar\", {\n          aula: response.data,\n          esNueva: false\n        });\n      }).catch(error => {\n        console.error('Error al editar el aula:', error);\n        this.$emit(\"error\", \"Error al editar el aula: \" + (error.response?.data?.message || error.message));\n      });\n    },\n    cancelar() {\n      this.$emit(\"cancelar\");\n    },\n    resetForm() {\n      this.aulaData = {\n        descripcion: \"\",\n        ubicacion: \"\",\n        cant_pcs: \"\",\n        cant_proyector: \"\",\n        es_climatizada: null,\n        aforo: \"\"\n      };\n      this.$refs.form.resetValidation();\n    }\n  },\n  created() {\n    if (this.aula) {\n      this.aulaData = {\n        ...this.aula\n      };\n    }\n  }\n};","map":{"version":3,"names":["custom_axios","props","aula","type","Object","default","id","descripcion","ubicacion","cant_pcs","cant_proyector","es_climatizada","aforo","editar","Boolean","data","valid","aulaData","descripcionRules","v","length","ubicacionRules","cant_pcsRules","cant_proyectorRules","es_climatizadaRules","aforoRules","watch","handler","nuevoValor","$nextTick","$refs","form","validate","immediate","deep","methods","submit","editarAula","guardarAula","post","then","response","console","log","$emit","esNueva","catch","error","message","patch","cancelar","resetForm","resetValidation","created"],"sources":["src/components/AbmAula.vue"],"sourcesContent":["<template>\n  <v-form ref=\"form\" v-model=\"valid\" @submit.prevent=\"submit\">\n    <v-card>\n      <v-card-title>{{ editar ? 'Editar Aula' : 'Agregar Aula' }}</v-card-title>\n      <v-card-text>\n        <v-text-field\n          v-model=\"aulaData.descripcion\"\n          label=\"Descripción\"\n          :rules=\"descripcionRules\"\n          required\n        ></v-text-field>\n        <v-text-field\n          v-model=\"aulaData.ubicacion\"\n          label=\"Ubicación\"\n          :rules=\"ubicacionRules\"\n          required\n        ></v-text-field>\n        <v-text-field\n          v-model.number=\"aulaData.cant_pcs\"\n          label=\"Cantidad de pcs\"\n          type=\"number\"\n          :rules=\"cant_pcsRules\"\n          required\n        ></v-text-field>\n        <v-text-field\n          v-model.number=\"aulaData.cant_proyector\"\n          label=\"Cant_proyector\"\n          type=\"number\"\n          :rules=\"cant_proyectorRules\"\n          required\n        ></v-text-field>\n        <v-radio-group\n          v-model=\"aulaData.es_climatizada\"\n          label=\"¿Es climatizada?\"\n          :rules=\"es_climatizadaRules\"\n          row\n        >\n          <v-radio label=\"Sí\" :value=\"true\"></v-radio>\n          <v-radio label=\"No\" :value=\"false\"></v-radio>\n        </v-radio-group>\n        <v-text-field\n          v-model.number=\"aulaData.aforo\"\n          label=\"Aforo\"\n          type=\"number\"\n          :rules=\"aforoRules\"\n          required\n        ></v-text-field>\n      </v-card-text>\n      <v-card-actions>\n        <v-btn color=\"primary\" @click=\"submit\" :disabled=\"!valid\">\n          Guardar\n        </v-btn>\n        <v-btn color=\"secondary\" @click=\"cancelar\">\n          Cancelar\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-form>\n</template>\n\n<script>\nimport custom_axios from '../plugins/axios.js';\n\nexport default {\n  props: {\n    aula: {\n      type: Object,\n      default: () => ({\n        id: \"\",\n        descripcion: \"\",\n        ubicacion: \"\",\n        cant_pcs: \"\",\n        cant_proyector: \"\",\n        es_climatizada: null,\n        aforo: \"\",\n      }),\n    },\n    editar: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      valid: false,\n      aulaData: {\n        descripcion: \"\",\n        ubicacion: \"\",\n        cant_pcs: \"\",\n        cant_proyector: \"\",\n        es_climatizada: null,\n        aforo: \"\",\n      },\n      descripcionRules: [\n        v => !!v || 'La descripción es obligatoria',\n        v => (v && v.length <= 100) || 'La descripción debe tener menos de 100 caracteres',\n      ],\n      ubicacionRules: [\n        v => !!v || 'La ubicación es obligatoria',\n        v => (v && v.length <= 100) || 'La ubicación debe tener menos de 100 caracteres',\n      ],\n      cant_pcsRules: [\n        v => !!v || 'La cantidad de PCs es obligatoria',\n        v => v >= 0 || 'La cantidad debe ser un número positivo',\n      ],\n      cant_proyectorRules: [\n        v => !!v || 'La cantidad de proyectores es obligatoria',\n        v => v >= 0 || 'La cantidad debe ser un número positivo',\n      ],\n      es_climatizadaRules: [\n        v => v !== null || 'Debes seleccionar si es climatizada o no',\n      ],\n      aforoRules: [\n        v => !!v || 'El aforo es obligatorio',\n        v => v > 0 || 'El aforo debe ser mayor que cero',\n      ],\n    };\n  },\n  watch: {\n    aula: {\n      handler(nuevoValor) {\n        this.aulaData = { ...nuevoValor };\n        if (this.editar) {\n          this.$nextTick(() => {\n            if (this.$refs.form) {\n              this.$refs.form.validate();\n            }\n          });\n        }\n      },\n      immediate: true,\n      deep: true,\n    },\n  },\n  methods: {\n    submit() {\n      if (this.$refs.form.validate()) {\n        if (this.editar) {\n          this.editarAula();\n        } else {\n          this.guardarAula();\n        }\n      }\n    },\n    guardarAula() {\n      custom_axios\n        .post(\"/apiv1/aula\", this.aulaData)\n        .then(response => {\n          console.log('Aula guardada:', response.data);\n          this.$emit(\"guardar\", { aula: response.data, esNueva: true });\n        })\n        .catch(error => {\n          console.error('Error al guardar el aula:', error);\n          this.$emit(\"error\", \"Error al guardar el aula: \" + (error.response?.data?.message || error.message));\n        });\n    },\n    editarAula() {\n      custom_axios\n        .patch(`/apiv1/aula/${this.aula.id}`, this.aulaData)\n        .then(response => {\n          console.log('Aula editada:', response.data);\n          this.$emit(\"guardar\", { aula: response.data, esNueva: false });\n        })\n        .catch(error => {\n          console.error('Error al editar el aula:', error);\n          this.$emit(\"error\", \"Error al editar el aula: \" + (error.response?.data?.message || error.message));\n        });\n    },\n    cancelar() {\n      this.$emit(\"cancelar\");\n    },\n    resetForm() {\n      this.aulaData = {\n        descripcion: \"\",\n        ubicacion: \"\",\n        cant_pcs: \"\",\n        cant_proyector: \"\",\n        es_climatizada: null,\n        aforo: \"\",\n      };\n      this.$refs.form.resetValidation();\n    },\n  },\n  created() {\n    if (this.aula) {\n      this.aulaData = { ...this.aula };\n    }\n  },\n};\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}