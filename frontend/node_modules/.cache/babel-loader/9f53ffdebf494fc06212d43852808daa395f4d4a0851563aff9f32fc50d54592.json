{"ast":null,"code":"import custom_axios from '../plugins/axios.js';\nexport default {\n  props: {\n    materia: {\n      type: Object,\n      default: () => ({\n        id: \"\",\n        nombre: \"\",\n        cant_alumnos: \"\",\n        id_carrera: \"\",\n        id_profesor: \"\"\n      })\n    },\n    editar: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      valid: false,\n      nombreMateria: this.materia.nombre,\n      cantAlumnos: this.materia.cant_alumnos,\n      selectedCarreraId: this.materia.id_carrera,\n      selectedProfesorId: this.materia.id_profesor,\n      carreras: [],\n      profesores: [],\n      nombreRules: [v => !!v || \"El nombre es requerido\"],\n      cantidadAlumnosRules: [v => !!v || \"La cantidad de alumnos es requerida\"]\n    };\n  },\n  watch: {\n    materia: {\n      handler(nuevoValor) {\n        this.nombreMateria = nuevoValor.nombre;\n        this.cantAlumnos = nuevoValor.cant_alumnos;\n        this.selectedCarreraId = nuevoValor.id_carrera;\n        this.selectedProfesorId = nuevoValor.id_profesor;\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    submit() {\n      if (this.editar) {\n        this.editarMateria();\n      } else {\n        this.guardarMateria();\n      }\n    },\n    guardarMateria() {\n      const data = {\n        nombre: this.nombreMateria,\n        cant_alumnos: this.cantAlumnos,\n        id_carrera: this.selectedCarreraId,\n        id_profesor: this.selectedProfesorId\n      };\n      const that = this;\n      custom_axios.post(\"/apiv1/materia\", data).then(function (response) {\n        console.log(response);\n        that.$emit(\"guardar\");\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    editarMateria() {\n      const data = {\n        nombre: this.nombreMateria,\n        cant_alumnos: this.cantAlumnos,\n        id_carrera: this.selectedCarreraId,\n        id_profesor: this.selectedProfesorId\n      };\n      const that = this;\n      custom_axios.patch(`/apiv1/materia/${this.materia.id}`, data).then(function (response) {\n        console.log(response);\n        alert(\"Registro Editado con Éxito!!\");\n        that.$emit(\"guardar\");\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    getCarreras() {\n      custom_axios.get(\"/apiv1/carrera\").then(response => {\n        this.carreras = response.data.map(carrera => {\n          return {\n            id: carrera.id,\n            nombre: carrera.nombre\n          };\n        });\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n    getProfesores() {\n      custom_axios.get(\"/apiv1/profesor\").then(response => {\n        this.profesores = response.data.map(profesor => {\n          return {\n            id: profesor.id,\n            nombreCompleto: `${profesor.nombre} ${profesor.apellido}`\n          };\n        });\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n    cancelar() {\n      this.$emit(\"cancelar\");\n    }\n  },\n  created() {\n    this.getCarreras();\n    this.getProfesores();\n  }\n};","map":{"version":3,"names":["custom_axios","props","materia","type","Object","default","id","nombre","cant_alumnos","id_carrera","id_profesor","editar","Boolean","data","valid","nombreMateria","cantAlumnos","selectedCarreraId","selectedProfesorId","carreras","profesores","nombreRules","v","cantidadAlumnosRules","watch","handler","nuevoValor","immediate","methods","submit","editarMateria","guardarMateria","that","post","then","response","console","log","$emit","catch","error","patch","alert","getCarreras","get","map","carrera","getProfesores","profesor","nombreCompleto","apellido","cancelar","created"],"sources":["src/components/AbmMateria.vue"],"sourcesContent":["<template>\n  <v-form v-model=\"valid\" @submit.prevent=\"submit\">\n    <v-card>\n      <v-card-title>{{ editar ? \"Editar Materia\" : \"Agregar Materia\" }}</v-card-title>\n      <v-card-text>\n        <v-text-field\n          v-model=\"nombreMateria\"\n          label=\"Nombre\"\n          :rules=\"nombreRules\"\n          required\n        ></v-text-field>\n        <v-text-field\n          v-model=\"cantAlumnos\"\n          label=\"Cantidad de alumnos\"\n          :rules=\"cantidadAlumnosRules\"\n          required\n        ></v-text-field>\n        <v-select\n          label=\"Seleccionar Carrera\"\n          v-model=\"selectedCarreraId\"\n          :items=\"carreras\"\n          item-text=\"nombre\"\n          item-value=\"id\"\n        ></v-select>\n        <v-select\n          label=\"Seleccionar Profesor\"\n          v-model=\"selectedProfesorId\"\n          :items=\"profesores\"\n          item-text=\"nombreCompleto\"\n          item-value=\"id\"\n        ></v-select>\n      </v-card-text>\n      <v-card-actions>\n        <v-btn color=\"primary\" @click=\"submit\" :disabled=\"!valid\">Guardar</v-btn>\n        <v-btn color=\"secondary\" @click=\"cancelar\">Cancelar</v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-form>\n</template>\n\n<script>\nimport custom_axios from '../plugins/axios.js';\n\nexport default {\n  props: {\n    materia: {\n      type: Object,\n      default: () => ({\n        id: \"\",\n        nombre: \"\",\n        cant_alumnos: \"\",\n        id_carrera: \"\",\n        id_profesor: \"\",\n      }),\n    },\n    editar: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      valid: false,\n      nombreMateria: this.materia.nombre,\n      cantAlumnos: this.materia.cant_alumnos,\n      selectedCarreraId: this.materia.id_carrera,\n      selectedProfesorId: this.materia.id_profesor,\n      carreras: [],\n      profesores: [],\n      nombreRules: [(v) => !!v || \"El nombre es requerido\"],\n      cantidadAlumnosRules: [(v) => !!v || \"La cantidad de alumnos es requerida\"],\n    };\n  },\n  watch: {\n    materia: {\n      handler(nuevoValor) {\n        this.nombreMateria = nuevoValor.nombre;\n        this.cantAlumnos = nuevoValor.cant_alumnos;\n        this.selectedCarreraId = nuevoValor.id_carrera;\n        this.selectedProfesorId = nuevoValor.id_profesor;\n      },\n      immediate: true,\n    },\n  },\n  methods: {\n    submit() {\n      if (this.editar) {\n        this.editarMateria();\n      } else {\n        this.guardarMateria();\n      }\n    },\n    guardarMateria() {\n      const data = {\n        nombre: this.nombreMateria,\n        cant_alumnos: this.cantAlumnos,\n        id_carrera: this.selectedCarreraId,\n        id_profesor: this.selectedProfesorId,\n      };\n      const that = this;\n\n      custom_axios\n        .post(\"/apiv1/materia\", data)\n        .then(function (response) {\n          console.log(response);\n          that.$emit(\"guardar\");\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    },\n    editarMateria() {\n      const data = {\n        nombre: this.nombreMateria,\n        cant_alumnos: this.cantAlumnos,\n        id_carrera: this.selectedCarreraId,\n        id_profesor: this.selectedProfesorId,\n      };\n      const that = this;\n\n      custom_axios\n        .patch(`/apiv1/materia/${this.materia.id}`, data)\n        .then(function (response) {\n          console.log(response);\n          alert(\"Registro Editado con Éxito!!\");\n          that.$emit(\"guardar\");\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    },\n    getCarreras() {\n      custom_axios\n        .get(\"/apiv1/carrera\")\n        .then((response) => {\n          this.carreras = response.data.map((carrera) => {\n            return { id: carrera.id, nombre: carrera.nombre };\n          });\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    getProfesores() {\n      custom_axios\n        .get(\"/apiv1/profesor\")\n        .then((response) => {\n          this.profesores = response.data.map((profesor) => {\n            return {\n              id: profesor.id,\n              nombreCompleto: `${profesor.nombre} ${profesor.apellido}`,\n            };\n          });\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    cancelar() {\n      this.$emit(\"cancelar\");\n    },\n  },\n  created() {\n    this.getCarreras();\n    this.getProfesores();\n  },\n};\n</script>\n\n<style scoped>\n.v-card-title {\n  font-weight: bold;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}