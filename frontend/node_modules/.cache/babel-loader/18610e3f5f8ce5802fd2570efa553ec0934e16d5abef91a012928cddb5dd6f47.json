{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport custom_axios from '../plugins/axios.js';\nimport AbmMateria from './AbmMateria.vue';\nexport default {\n  name: 'ListadoMateriasYProfesores',\n  components: {\n    AbmMateria\n  },\n  data() {\n    return {\n      headers: [{\n        text: 'Tipo',\n        value: 'tipo'\n      }, {\n        text: 'Nombre',\n        value: 'nombre'\n      }, {\n        text: 'Cantidad de Alumnos / Apellido',\n        value: 'detalle'\n      }, {\n        text: 'Acciones',\n        value: 'actions',\n        sortable: false\n      }],\n      listadoCombinado: [],\n      mostrarAbmMateria: false,\n      mostrarConfirmacion: false,\n      elementoSeleccionado: {},\n      editar: false\n    };\n  },\n  methods: {\n    async cargarDatos() {\n      try {\n        const [materiasResponse, profesoresResponse] = await Promise.all([custom_axios.get('/apiv1/materia'), custom_axios.get('/apiv1/profesor')]);\n        const materias = materiasResponse.data.map(m => ({\n          id: m.id,\n          tipo: 'Materia',\n          nombre: m.nombre,\n          detalle: m.cant_alumnos,\n          original: m\n        }));\n        const profesores = profesoresResponse.data.map(p => ({\n          id: p.id,\n          tipo: 'Profesor',\n          nombre: p.nombre,\n          detalle: p.apellido,\n          original: p\n        }));\n        this.listadoCombinado = [...materias, ...profesores];\n        console.log('Datos combinados cargados:', this.listadoCombinado);\n      } catch (error) {\n        console.error('Error al cargar datos:', error);\n      }\n    },\n    navigateToAbmMateria() {\n      this.$router.push('/abmmateria');\n    },\n    navigateToHome() {\n      this.$router.push('/');\n    },\n    editarElemento(item) {\n      this.elementoSeleccionado = item.original;\n      this.editar = true;\n      this.mostrarAbmMateria = true;\n    },\n    confirmarEliminarElemento(item) {\n      this.elementoSeleccionado = item;\n      this.mostrarConfirmacion = true;\n    },\n    async eliminarElementoConfirmado() {\n      try {\n        const endpoint = this.elementoSeleccionado.tipo === 'Materia' ? 'materia' : 'profesor';\n        const response = await custom_axios.delete(`/apiv1/${endpoint}/${this.elementoSeleccionado.id}`);\n        if (response.status === 204) {\n          await this.cargarDatos();\n        }\n      } catch (error) {\n        console.error('Error al eliminar elemento:', error);\n      }\n      this.mostrarConfirmacion = false;\n    },\n    guardarAbmMateria() {\n      this.mostrarAbmMateria = false;\n      this.cargarDatos();\n    },\n    cancelarAbmMateria() {\n      this.mostrarAbmMateria = false;\n    }\n  },\n  mounted() {\n    this.cargarDatos();\n  }\n};","map":{"version":3,"names":["custom_axios","AbmMateria","name","components","data","headers","text","value","sortable","listadoCombinado","mostrarAbmMateria","mostrarConfirmacion","elementoSeleccionado","editar","methods","cargarDatos","materiasResponse","profesoresResponse","Promise","all","get","materias","map","m","id","tipo","nombre","detalle","cant_alumnos","original","profesores","p","apellido","console","log","error","navigateToAbmMateria","$router","push","navigateToHome","editarElemento","item","confirmarEliminarElemento","eliminarElementoConfirmado","endpoint","response","delete","status","guardarAbmMateria","cancelarAbmMateria","mounted"],"sources":["src/components/ListadoMateria.vue"],"sourcesContent":["<template>\n  <div class=\"aula-container\">\n    <div class=\"button-container\">\n      <v-btn \n        color=\"primary\"\n        @click=\"navigateToAbmMateria\"\n        class=\"custom-button mr-4\"\n      >\n        <v-icon left>mdi-school</v-icon>\n        Agregar Materia\n      </v-btn>\n      <v-btn\n        color=\"blue\" \n        @click=\"navigateToHome\"\n        class=\"custom-button\"\n      >\n        <v-icon left>mdi-home</v-icon>\n        Volver a Home\n      </v-btn>\n    </div>\n\n    <h2>Materias y Profesores</h2>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"listadoCombinado\"\n      :items-per-page=\"10\"\n      class=\"elevation-1\"\n    >\n      <template v-slot:item.actions=\"{ item }\">\n        <v-icon small class=\"mr-2\" @click=\"editarElemento(item)\">mdi-pencil</v-icon>\n        <v-icon small @click=\"confirmarEliminarElemento(item)\">mdi-delete</v-icon>\n      </template>\n    </v-data-table>\n\n    <v-dialog v-model=\"mostrarAbmMateria\" max-width=\"500px\" persistent>\n      <AbmMateria\n        :materia=\"elementoSeleccionado\"\n        :editar=\"editar\"\n        @guardar=\"guardarAbmMateria\"\n        @cancelar=\"cancelarAbmMateria\"\n      />\n    </v-dialog>\n\n    <v-dialog v-model=\"mostrarConfirmacion\" max-width=\"500px\">\n      <v-card>\n        <v-card-title class=\"headline\">Confirmar Eliminación</v-card-title>\n        <v-card-text>¿Está seguro de que desea eliminar este elemento?</v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"green darken-1\" text @click=\"mostrarConfirmacion = false\">Cancelar</v-btn>\n          <v-btn color=\"red darken-1\" text @click=\"eliminarElementoConfirmado\">Eliminar</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nimport custom_axios from '../plugins/axios.js';\nimport AbmMateria from './AbmMateria.vue';\n\nexport default {\n  name: 'ListadoMateriasYProfesores',\n  components: {\n    AbmMateria,\n  },\n  data() {\n    return {\n      headers: [\n        { text: 'Tipo', value: 'tipo' },\n        { text: 'Nombre', value: 'nombre' },\n        { text: 'Cantidad de Alumnos / Apellido', value: 'detalle' },\n        { text: 'Acciones', value: 'actions', sortable: false },\n      ],\n      listadoCombinado: [],\n      mostrarAbmMateria: false,\n      mostrarConfirmacion: false,\n      elementoSeleccionado: {},\n      editar: false,\n    };\n  },\n  methods: {\n    async cargarDatos() {\n      try {\n        const [materiasResponse, profesoresResponse] = await Promise.all([\n          custom_axios.get('/apiv1/materia'),\n          custom_axios.get('/apiv1/profesor')\n        ]);\n\n        const materias = materiasResponse.data.map(m => ({\n          id: m.id,\n          tipo: 'Materia',\n          nombre: m.nombre,\n          detalle: m.cant_alumnos,\n          original: m\n        }));\n\n        const profesores = profesoresResponse.data.map(p => ({\n          id: p.id,\n          tipo: 'Profesor',\n          nombre: p.nombre,\n          detalle: p.apellido,\n          original: p\n        }));\n\n        this.listadoCombinado = [...materias, ...profesores];\n        console.log('Datos combinados cargados:', this.listadoCombinado);\n      } catch (error) {\n        console.error('Error al cargar datos:', error);\n      }\n    },\n    navigateToAbmMateria() {\n      this.$router.push('/abmmateria');\n    },\n    navigateToHome() {\n      this.$router.push('/');\n    },\n    editarElemento(item) {\n      this.elementoSeleccionado = item.original;\n      this.editar = true;\n      this.mostrarAbmMateria = true;\n    },\n    confirmarEliminarElemento(item) {\n      this.elementoSeleccionado = item;\n      this.mostrarConfirmacion = true;\n    },\n    async eliminarElementoConfirmado() {\n      try {\n        const endpoint = this.elementoSeleccionado.tipo === 'Materia' ? 'materia' : 'profesor';\n        const response = await custom_axios.delete(`/apiv1/${endpoint}/${this.elementoSeleccionado.id}`);\n        if (response.status === 204) {\n          await this.cargarDatos();\n        }\n      } catch (error) {\n        console.error('Error al eliminar elemento:', error);\n      }\n      this.mostrarConfirmacion = false;\n    },\n    guardarAbmMateria() {\n      this.mostrarAbmMateria = false;\n      this.cargarDatos();\n    },\n    cancelarAbmMateria() {\n      this.mostrarAbmMateria = false;\n    },\n  },\n  mounted() {\n    this.cargarDatos();\n  },\n};\n</script>\n\n<style scoped>\n.aula-container {\n  padding: 20px;\n}\n.button-container {\n  margin-bottom: 20px;\n}\n.custom-button {\n  margin-right: 10px;\n}\n</style>"],"mappings":";AA0DA,OAAAA,YAAA;AACA,OAAAC,UAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAF;EACA;EACAG,KAAA;IACA;MACAC,OAAA,GACA;QAAAC,IAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,KAAA;QAAAC,QAAA;MAAA,EACA;MACAC,gBAAA;MACAC,iBAAA;MACAC,mBAAA;MACAC,oBAAA;MACAC,MAAA;IACA;EACA;EACAC,OAAA;IACA,MAAAC,YAAA;MACA;QACA,OAAAC,gBAAA,EAAAC,kBAAA,UAAAC,OAAA,CAAAC,GAAA,EACAnB,YAAA,CAAAoB,GAAA,oBACApB,YAAA,CAAAoB,GAAA,oBACA;QAEA,MAAAC,QAAA,GAAAL,gBAAA,CAAAZ,IAAA,CAAAkB,GAAA,CAAAC,CAAA;UACAC,EAAA,EAAAD,CAAA,CAAAC,EAAA;UACAC,IAAA;UACAC,MAAA,EAAAH,CAAA,CAAAG,MAAA;UACAC,OAAA,EAAAJ,CAAA,CAAAK,YAAA;UACAC,QAAA,EAAAN;QACA;QAEA,MAAAO,UAAA,GAAAb,kBAAA,CAAAb,IAAA,CAAAkB,GAAA,CAAAS,CAAA;UACAP,EAAA,EAAAO,CAAA,CAAAP,EAAA;UACAC,IAAA;UACAC,MAAA,EAAAK,CAAA,CAAAL,MAAA;UACAC,OAAA,EAAAI,CAAA,CAAAC,QAAA;UACAH,QAAA,EAAAE;QACA;QAEA,KAAAtB,gBAAA,OAAAY,QAAA,KAAAS,UAAA;QACAG,OAAA,CAAAC,GAAA,oCAAAzB,gBAAA;MACA,SAAA0B,KAAA;QACAF,OAAA,CAAAE,KAAA,2BAAAA,KAAA;MACA;IACA;IACAC,qBAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IACAC,eAAA;MACA,KAAAF,OAAA,CAAAC,IAAA;IACA;IACAE,eAAAC,IAAA;MACA,KAAA7B,oBAAA,GAAA6B,IAAA,CAAAZ,QAAA;MACA,KAAAhB,MAAA;MACA,KAAAH,iBAAA;IACA;IACAgC,0BAAAD,IAAA;MACA,KAAA7B,oBAAA,GAAA6B,IAAA;MACA,KAAA9B,mBAAA;IACA;IACA,MAAAgC,2BAAA;MACA;QACA,MAAAC,QAAA,QAAAhC,oBAAA,CAAAa,IAAA;QACA,MAAAoB,QAAA,SAAA7C,YAAA,CAAA8C,MAAA,WAAAF,QAAA,SAAAhC,oBAAA,CAAAY,EAAA;QACA,IAAAqB,QAAA,CAAAE,MAAA;UACA,WAAAhC,WAAA;QACA;MACA,SAAAoB,KAAA;QACAF,OAAA,CAAAE,KAAA,gCAAAA,KAAA;MACA;MACA,KAAAxB,mBAAA;IACA;IACAqC,kBAAA;MACA,KAAAtC,iBAAA;MACA,KAAAK,WAAA;IACA;IACAkC,mBAAA;MACA,KAAAvC,iBAAA;IACA;EACA;EACAwC,QAAA;IACA,KAAAnC,WAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}