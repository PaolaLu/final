{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport custom_axios from '../plugins/axios.js';\nexport default {\n  props: {\n    materia: {\n      type: Object,\n      default: () => ({\n        id: \"\",\n        nombre: \"\",\n        cant_alumnos: \"\",\n        id_carrera: \"\",\n        id_profesor: \"\"\n      })\n    },\n    editar: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      valid: false,\n      nombreMateria: this.materia.nombre,\n      cantAlumnos: this.materia.cant_alumnos,\n      selectedCarreraId: this.materia.id_carrera,\n      selectedProfesorId: this.materia.id_profesor,\n      carreras: [],\n      profesores: [],\n      nombreRules: [v => !!v || \"El nombre es requerido\"],\n      cantidadAlumnosRules: [v => !!v || \"La cantidad de alumnos es requerida\"]\n    };\n  },\n  watch: {\n    materia: {\n      handler(nuevoValor) {\n        this.materiaData = {\n          ...nuevoValor\n        };\n        if (!this.editar) {\n          this.resetValidationForAbm();\n        }\n      },\n      immediate: true,\n      deep: true\n    }\n  },\n  methods: {\n    submit() {\n      if (this.editar) {\n        this.editarMateria();\n      } else {\n        this.guardarMateria();\n      }\n    },\n    guardarMateria() {\n      custom_axios.post('/apiv1/materia', this.materiaData).then(response => {\n        console.log(response);\n        this.resetValidationForAbm();\n        this.$emit('guardar');\n        this.$router.push('/materia');\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    editarMateria() {\n      custom_axios.patch(`/apiv1/materia/${this.materiaData.id}`, this.materiaData).then(response => {\n        console.log(response);\n        this.resetValidationForAbm();\n        this.$emit('guardar');\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    cancelar() {\n      this.resetValidationForAbm();\n      this.$emit('cancelar');\n      this.$router.push('/materia');\n    },\n    resetValidationForAbm() {\n      if (this.$refs.form) {\n        this.$refs.form.resetValidation();\n      }\n    },\n    fetchCarreras() {\n      custom_axios.get('/apiv1/carrera').then(response => {\n        this.carreras = response.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    fetchProfesores() {\n      custom_axios.get('/apiv1/profesor').then(response => {\n        this.profesores = response.data.map(profesor => ({\n          ...profesor,\n          nombreCompleto: `${profesor.nombre} ${profesor.apellido}`\n        }));\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  },\n  created() {\n    if (this.materia) {\n      this.materiaData = {\n        ...this.materia\n      };\n    }\n    this.fetchCarreras();\n    this.fetchProfesores();\n  }\n};","map":{"version":3,"names":["custom_axios","props","materia","type","Object","default","id","nombre","cant_alumnos","id_carrera","id_profesor","editar","Boolean","data","valid","nombreMateria","cantAlumnos","selectedCarreraId","selectedProfesorId","carreras","profesores","nombreRules","v","cantidadAlumnosRules","watch","handler","nuevoValor","materiaData","resetValidationForAbm","immediate","deep","methods","submit","editarMateria","guardarMateria","post","then","response","console","log","$emit","$router","push","catch","error","patch","cancelar","$refs","form","resetValidation","fetchCarreras","get","fetchProfesores","map","profesor","nombreCompleto","apellido","created"],"sources":["src/components/AbmMateria.vue"],"sourcesContent":["<template>\n  <v-form ref=\"form\" v-model=\"valid\" @submit.prevent=\"submit\">\n    <v-card>\n      <v-card-title>{{ editar ? 'Editar Materia' : 'Agregar Materia' }}</v-card-title>\n      <v-card-text>\n        <v-text-field\n          v-model=\"materiaData.nombre\"\n          label=\"Nombre\"\n          :rules=\"nombreRules\"\n          required\n        ></v-text-field>\n        <v-text-field\n          v-model=\"cantAlumnos\"\n          label=\"Cantidad de Alumnos\"\n          :rules=\"cantAlumnosRules\"\n          required\n          type=\"number\"\n        ></v-text-field>\n        <v-select\n        label=\"Seleccionar Carrera\"\n            v-model=\"selectedCarreraId\"\n            :items=\"carreras\"\n            item-text=\"nombre\"\n            item-value=\"id\"\n          ></v-select>\n          <v-select\n            label=\"Seleccionar Profesor\"\n            v-model=\"selectedProfesorId\"\n            :items=\"profesores\"\n            item-text=\"nombreCompleto\"\n            item-value=\"id\"\n        ></v-select>\n      </v-card-text>\n      <v-card-actions>\n        <v-btn color=\"primary\" @click=\"submit\" :disabled=\"!valid\">Guardar</v-btn>\n        <v-btn color=\"secondary\" @click=\"cancelar\">Cancelar</v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-form>\n</template>\n\n<script>\nimport custom_axios from '../plugins/axios.js';\n\nexport default {\n  props: {\n    materia: {\n      type: Object,\n      default: () => ({ id: \"\", nombre: \"\", cant_alumnos: \"\", id_carrera: \"\", id_profesor: \"\" }),\n    },\n    editar: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n      return {\n        valid: false,\n        nombreMateria: this.materia.nombre,\n        cantAlumnos: this.materia.cant_alumnos,\n        selectedCarreraId: this.materia.id_carrera,\n        selectedProfesorId: this.materia.id_profesor,\n        carreras: [],\n        profesores: [],\n        nombreRules: [(v) => !!v || \"El nombre es requerido\"],\n        cantidadAlumnosRules: [(v) => !!v || \"La cantidad de alumnos es requerida\"],\n      };\n    },\n  watch: {\n    materia: {\n      handler(nuevoValor) {\n        this.materiaData = { ...nuevoValor };\n        if (!this.editar) {\n          this.resetValidationForAbm();\n        }\n      },\n      immediate: true,\n      deep: true,\n    },\n  },\n  methods: {\n    submit() {\n      if (this.editar) {\n        this.editarMateria();\n      } else {\n        this.guardarMateria();\n      }\n    },\n    guardarMateria() {\n      custom_axios\n        .post('/apiv1/materia', this.materiaData)\n        .then((response) => {\n          console.log(response);\n          this.resetValidationForAbm();\n          this.$emit('guardar');\n          this.$router.push('/materia');\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    editarMateria() {\n      custom_axios\n        .patch(`/apiv1/materia/${this.materiaData.id}`, this.materiaData)\n        .then((response) => {\n          console.log(response);\n          this.resetValidationForAbm();\n          this.$emit('guardar');\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    cancelar() {\n      this.resetValidationForAbm();\n      this.$emit('cancelar');\n      this.$router.push('/materia');\n    },\n    resetValidationForAbm() {\n      if (this.$refs.form) {\n        this.$refs.form.resetValidation();\n      }\n    },\n    fetchCarreras() {\n      custom_axios.get('/apiv1/carrera')\n        .then(response => {\n          this.carreras = response.data;\n        })\n        .catch(error => {\n          console.log(error);\n        });\n    },\n    fetchProfesores() {\n      custom_axios.get('/apiv1/profesor')\n        .then(response => {\n          this.profesores = response.data.map(profesor => ({\n            ...profesor,\n            nombreCompleto: `${profesor.nombre} ${profesor.apellido}`\n          }));\n        })\n        .catch(error => {\n          console.log(error);\n        });\n    },\n  },\n  created() {\n    if (this.materia) {\n      this.materiaData = { ...this.materia };\n    }\n    this.fetchCarreras();\n    this.fetchProfesores();\n  },\n};\n</script>\n\n<style scoped>\n</style>\n"],"mappings":";AA0CA,OAAAA,YAAA;AAEA;EACAC,KAAA;IACAC,OAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA,EAAAA,CAAA;QAAAC,EAAA;QAAAC,MAAA;QAAAC,YAAA;QAAAC,UAAA;QAAAC,WAAA;MAAA;IACA;IACAC,MAAA;MACAR,IAAA,EAAAS,OAAA;MACAP,OAAA;IACA;EACA;EACAQ,KAAA;IACA;MACAC,KAAA;MACAC,aAAA,OAAAb,OAAA,CAAAK,MAAA;MACAS,WAAA,OAAAd,OAAA,CAAAM,YAAA;MACAS,iBAAA,OAAAf,OAAA,CAAAO,UAAA;MACAS,kBAAA,OAAAhB,OAAA,CAAAQ,WAAA;MACAS,QAAA;MACAC,UAAA;MACAC,WAAA,GAAAC,CAAA,MAAAA,CAAA;MACAC,oBAAA,GAAAD,CAAA,MAAAA,CAAA;IACA;EACA;EACAE,KAAA;IACAtB,OAAA;MACAuB,QAAAC,UAAA;QACA,KAAAC,WAAA;UAAA,GAAAD;QAAA;QACA,UAAAf,MAAA;UACA,KAAAiB,qBAAA;QACA;MACA;MACAC,SAAA;MACAC,IAAA;IACA;EACA;EACAC,OAAA;IACAC,OAAA;MACA,SAAArB,MAAA;QACA,KAAAsB,aAAA;MACA;QACA,KAAAC,cAAA;MACA;IACA;IACAA,eAAA;MACAlC,YAAA,CACAmC,IAAA,wBAAAR,WAAA,EACAS,IAAA,CAAAC,QAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,QAAA;QACA,KAAAT,qBAAA;QACA,KAAAY,KAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;MACA,GACAC,KAAA,CAAAC,KAAA;QACAN,OAAA,CAAAC,GAAA,CAAAK,KAAA;MACA;IACA;IACAX,cAAA;MACAjC,YAAA,CACA6C,KAAA,wBAAAlB,WAAA,CAAArB,EAAA,SAAAqB,WAAA,EACAS,IAAA,CAAAC,QAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,QAAA;QACA,KAAAT,qBAAA;QACA,KAAAY,KAAA;MACA,GACAG,KAAA,CAAAC,KAAA;QACAN,OAAA,CAAAC,GAAA,CAAAK,KAAA;MACA;IACA;IACAE,SAAA;MACA,KAAAlB,qBAAA;MACA,KAAAY,KAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IACAd,sBAAA;MACA,SAAAmB,KAAA,CAAAC,IAAA;QACA,KAAAD,KAAA,CAAAC,IAAA,CAAAC,eAAA;MACA;IACA;IACAC,cAAA;MACAlD,YAAA,CAAAmD,GAAA,mBACAf,IAAA,CAAAC,QAAA;QACA,KAAAlB,QAAA,GAAAkB,QAAA,CAAAxB,IAAA;MACA,GACA8B,KAAA,CAAAC,KAAA;QACAN,OAAA,CAAAC,GAAA,CAAAK,KAAA;MACA;IACA;IACAQ,gBAAA;MACApD,YAAA,CAAAmD,GAAA,oBACAf,IAAA,CAAAC,QAAA;QACA,KAAAjB,UAAA,GAAAiB,QAAA,CAAAxB,IAAA,CAAAwC,GAAA,CAAAC,QAAA;UACA,GAAAA,QAAA;UACAC,cAAA,KAAAD,QAAA,CAAA/C,MAAA,IAAA+C,QAAA,CAAAE,QAAA;QACA;MACA,GACAb,KAAA,CAAAC,KAAA;QACAN,OAAA,CAAAC,GAAA,CAAAK,KAAA;MACA;IACA;EACA;EACAa,QAAA;IACA,SAAAvD,OAAA;MACA,KAAAyB,WAAA;QAAA,QAAAzB;MAAA;IACA;IACA,KAAAgD,aAAA;IACA,KAAAE,eAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}