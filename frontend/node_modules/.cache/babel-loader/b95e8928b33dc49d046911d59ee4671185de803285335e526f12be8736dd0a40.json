{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport custom_axios from '../plugins/axios.js';\nimport AbmMateria from './AbmMateria.vue';\nexport default {\n  components: {\n    AbmMateria\n  },\n  data() {\n    return {\n      headers: [{\n        text: 'Nombre',\n        value: 'nombre'\n      }, {\n        text: 'Cantidad de Alumnos',\n        value: 'cant_alumnos'\n      }, {\n        text: 'Carrera',\n        value: 'carrera'\n      }, {\n        text: 'Profesor',\n        value: 'profesor'\n      }, {\n        text: 'Acciones',\n        value: 'actions',\n        sortable: false\n      }],\n      listadoMaterias: [],\n      mostrarAbmMateria: false,\n      mostrarConfirmacion: false,\n      materiaSeleccionada: {},\n      materiaAEliminar: null,\n      editar: false\n    };\n  },\n  methods: {\n    todasLasMaterias() {\n      custom_axios.get('/apiv1/materia').then(response => {\n        if (response.status === 200) {\n          this.listadoMaterias = response.data.map(materia => ({\n            ...materia,\n            carrera: materia.carrera ? materia.carrera.nombre : 'No asignado',\n            profesor: materia.profesor ? `${materia.profesor.nombre} ${materia.profesor.apellido}` : 'No asignado'\n          }));\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    navigateToAbmMateria() {\n      this.materiaSeleccionada = {};\n      this.editar = false;\n      this.mostrarAbmMateria = true;\n    },\n    navigateToHome() {\n      this.$router.push('/');\n    },\n    editarMateria(item) {\n      this.materiaSeleccionada = {\n        ...item\n      };\n      this.editar = true;\n      this.mostrarAbmMateria = true;\n    },\n    confirmarEliminarMateria(item) {\n      this.materiaAEliminar = item;\n      this.mostrarConfirmacion = true;\n    },\n    eliminarMateriaConfirmada() {\n      custom_axios.delete(`/apiv1/materia/${this.materiaAEliminar.id}`).then(response => {\n        if (response.status === 204) {\n          this.todasLasMaterias();\n          this.mostrarConfirmacion = false;\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    guardarAbmMateria() {\n      this.mostrarAbmMateria = false;\n      this.todasLasMaterias();\n    },\n    cancelarAbmMateria() {\n      this.mostrarAbmMateria = false;\n    }\n  },\n  mounted() {\n    this.todasLasMaterias();\n  }\n};","map":{"version":3,"names":["custom_axios","AbmMateria","components","data","headers","text","value","sortable","listadoMaterias","mostrarAbmMateria","mostrarConfirmacion","materiaSeleccionada","materiaAEliminar","editar","methods","todasLasMaterias","get","then","response","status","map","materia","carrera","nombre","profesor","apellido","catch","error","console","log","navigateToAbmMateria","navigateToHome","$router","push","editarMateria","item","confirmarEliminarMateria","eliminarMateriaConfirmada","delete","id","guardarAbmMateria","cancelarAbmMateria","mounted"],"sources":["src/components/ListadoMateria.vue"],"sourcesContent":["<template>\n    <div class=\"aula-container\">\n      <div class=\"button-container\">\n        <v-btn \n          color=\"primary\"\n          @click=\"navigateToAbmMateria\"\n          class=\"custom-button mr-4\"\n        >\n          <v-icon left>mdi-school</v-icon>\n          Agregar Materia\n        </v-btn>\n        <v-btn\n          color=\"blue\" \n          @click=\"navigateToHome\"\n          class=\"custom-button\"\n        >\n          <v-icon left>mdi-home</v-icon>\n          Volver a Home\n        </v-btn>\n      </div>\n  \n      <v-data-table\n        :headers=\"headers\"\n        :items=\"listadoMaterias\"\n        item-value=\"name\"\n      >\n        <template v-slot:item.carrera=\"{ item }\">\n          <span>{{ item.carrera.nombre }}</span>\n        </template>\n        <template v-slot:item.profesor=\"{ item }\">\n          <span>{{ item.profesor.nombre }} {{ item.profesor.apellido }}</span>\n        </template>\n        <template v-slot:item.actions=\"{ item }\">\n          <v-icon color=\"green\" @click=\"editarMateria(item)\" class=\"mr-2\">mdi-pencil</v-icon>\n          <v-icon color=\"red\" @click=\"confirmarEliminarMateria(item)\" class=\"ml-2\">mdi-delete</v-icon>\n        </template>\n      </v-data-table>\n  \n      <v-dialog v-model=\"mostrarAbmMateria\" max-width=\"500px\" persistent>\n        <AbmMateria\n          :materia=\"materiaSeleccionada\"\n          :editar=\"editar\"\n          @guardar=\"guardarAbmMateria\"\n          @cancelar=\"cancelarAbmMateria\"\n        />\n      </v-dialog>\n  \n      <v-dialog v-model=\"mostrarConfirmacion\" max-width=\"500px\">\n        <v-card>\n          <v-card-title class=\"headline\">Confirmar Eliminación</v-card-title>\n          <v-card-text>¿Está seguro de que desea eliminar esta materia?</v-card-text>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"green darken-1\" text @click=\"mostrarConfirmacion = false\">Cancelar</v-btn>\n            <v-btn color=\"red darken-1\" text @click=\"eliminarMateriaConfirmada\">Eliminar</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n  </template>\n  \n  <script>\n  import custom_axios from '../plugins/axios.js';\n  import AbmMateria from './AbmMateria.vue';\n  \n  export default {\n    components: {\n      AbmMateria,\n    },\n    data() {\n      return {\n        headers: [\n          { text: 'Nombre', value: 'nombre' },\n          { text: 'Cantidad de Alumnos', value: 'cant_alumnos' },\n          { text: 'Carrera', value: 'carrera' },\n          { text: 'Profesor', value: 'profesor' },\n          { text: 'Acciones', value: 'actions', sortable: false },\n        ],\n        listadoMaterias: [],\n        mostrarAbmMateria: false,\n        mostrarConfirmacion: false,\n        materiaSeleccionada: {},\n        materiaAEliminar: null,\n        editar: false,\n      };\n    },\n    methods: {\n      todasLasMaterias() {\n        custom_axios\n          .get('/apiv1/materia')\n          .then(response => {\n            if (response.status === 200) {\n              this.listadoMaterias = response.data.map(materia => ({\n                ...materia,\n                carrera: materia.carrera ? materia.carrera.nombre : 'No asignado',\n                profesor: materia.profesor ? `${materia.profesor.nombre} ${materia.profesor.apellido}` : 'No asignado'\n              }));\n            }\n          })\n          .catch(error => {\n            console.log(error);\n          });\n      },\n      navigateToAbmMateria() {\n        this.materiaSeleccionada = {};\n        this.editar = false;\n        this.mostrarAbmMateria = true;\n      },\n      navigateToHome() {\n        this.$router.push('/');\n      },\n      editarMateria(item) {\n        this.materiaSeleccionada = { ...item };\n        this.editar = true;\n        this.mostrarAbmMateria = true;\n      },\n      confirmarEliminarMateria(item) {\n        this.materiaAEliminar = item;\n        this.mostrarConfirmacion = true;\n      },\n      eliminarMateriaConfirmada() {\n        custom_axios\n          .delete(`/apiv1/materia/${this.materiaAEliminar.id}`)\n          .then(response => {\n            if (response.status === 204) {\n              this.todasLasMaterias();\n              this.mostrarConfirmacion = false;\n            }\n          })\n          .catch(error => {\n            console.log(error);\n          });\n      },\n      guardarAbmMateria() {\n        this.mostrarAbmMateria = false;\n        this.todasLasMaterias();\n      },\n      cancelarAbmMateria() {\n        this.mostrarAbmMateria = false;\n      },\n    },\n    mounted() {\n      this.todasLasMaterias();\n    },\n  };\n  </script>\n  \n  <style scoped>\n  .mr-2 {\n    margin-right: 8px;\n  }\n  .ml-2 {\n    margin-left: 8px;\n  }\n  </style>\n  "],"mappings":";AA8DA,OAAAA,YAAA;AACA,OAAAC,UAAA;AAEA;EACAC,UAAA;IACAD;EACA;EACAE,KAAA;IACA;MACAC,OAAA,GACA;QAAAC,IAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,KAAA;QAAAC,QAAA;MAAA,EACA;MACAC,eAAA;MACAC,iBAAA;MACAC,mBAAA;MACAC,mBAAA;MACAC,gBAAA;MACAC,MAAA;IACA;EACA;EACAC,OAAA;IACAC,iBAAA;MACAf,YAAA,CACAgB,GAAA,mBACAC,IAAA,CAAAC,QAAA;QACA,IAAAA,QAAA,CAAAC,MAAA;UACA,KAAAX,eAAA,GAAAU,QAAA,CAAAf,IAAA,CAAAiB,GAAA,CAAAC,OAAA;YACA,GAAAA,OAAA;YACAC,OAAA,EAAAD,OAAA,CAAAC,OAAA,GAAAD,OAAA,CAAAC,OAAA,CAAAC,MAAA;YACAC,QAAA,EAAAH,OAAA,CAAAG,QAAA,MAAAH,OAAA,CAAAG,QAAA,CAAAD,MAAA,IAAAF,OAAA,CAAAG,QAAA,CAAAC,QAAA;UACA;QACA;MACA,GACAC,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;MACA;IACA;IACAG,qBAAA;MACA,KAAAnB,mBAAA;MACA,KAAAE,MAAA;MACA,KAAAJ,iBAAA;IACA;IACAsB,eAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IACAC,cAAAC,IAAA;MACA,KAAAxB,mBAAA;QAAA,GAAAwB;MAAA;MACA,KAAAtB,MAAA;MACA,KAAAJ,iBAAA;IACA;IACA2B,yBAAAD,IAAA;MACA,KAAAvB,gBAAA,GAAAuB,IAAA;MACA,KAAAzB,mBAAA;IACA;IACA2B,0BAAA;MACArC,YAAA,CACAsC,MAAA,wBAAA1B,gBAAA,CAAA2B,EAAA,IACAtB,IAAA,CAAAC,QAAA;QACA,IAAAA,QAAA,CAAAC,MAAA;UACA,KAAAJ,gBAAA;UACA,KAAAL,mBAAA;QACA;MACA,GACAgB,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;MACA;IACA;IACAa,kBAAA;MACA,KAAA/B,iBAAA;MACA,KAAAM,gBAAA;IACA;IACA0B,mBAAA;MACA,KAAAhC,iBAAA;IACA;EACA;EACAiC,QAAA;IACA,KAAA3B,gBAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}