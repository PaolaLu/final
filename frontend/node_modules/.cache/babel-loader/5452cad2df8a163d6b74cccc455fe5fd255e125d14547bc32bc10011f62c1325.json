{"ast":null,"code":"import custom_axios from '../plugins/axios.js';\nimport AbmHorarioMateria from './AbmHorarioMateria.vue';\nexport default {\n  components: {\n    AbmHorarioMateria\n  },\n  data() {\n    return {\n      headers: [{\n        text: 'ID',\n        value: 'id'\n      }, {\n        text: 'Materia',\n        value: 'materia'\n      }, {\n        text: 'Desde',\n        value: 'fh_desde'\n      }, {\n        text: 'Hasta',\n        value: 'fh_hasta'\n      }, {\n        text: 'Acciones',\n        value: 'actions',\n        sortable: false\n      }],\n      listadoHorarios: [],\n      mostrarAbmHorarioMateria: false,\n      mostrarConfirmacion: false,\n      horarioSeleccionado: {},\n      horarioAEliminar: null,\n      editar: false\n    };\n  },\n  methods: {\n    todosLosHorarios() {\n      custom_axios.get('/apiv1/horariomateria').then(response => {\n        if (response.status === 200) {\n          const horarios = response.data;\n          const promises = horarios.map(horario => {\n            return custom_axios.get(`/apiv1/materia/${horario.id_materia}`).then(result => ({\n              ...horario,\n              materia: result.data.nombre\n            }));\n          });\n          Promise.all(promises).then(updatedHorarios => {\n            this.listadoHorarios = updatedHorarios;\n          }).catch(error => {\n            console.error('Error obteniendo nombres de materias:', error);\n          });\n        }\n      }).catch(error => {\n        console.error('Error obteniendo horarios:', error);\n      });\n    },\n    abrirAbmHorarioMateria(editar, horario = null) {\n      this.editar = editar;\n      this.horarioSeleccionado = horario ? {\n        ...horario\n      } : {};\n      this.mostrarAbmHorarioMateria = true;\n    },\n    cancelarAbmHorarioMateria() {\n      this.mostrarAbmHorarioMateria = false;\n    },\n    guardarAbmHorarioMateria() {\n      this.mostrarAbmHorarioMateria = false;\n      this.todosLosHorarios();\n    },\n    confirmarEliminarHorario(horario) {\n      this.horarioAEliminar = horario;\n      this.mostrarConfirmacion = true;\n    },\n    eliminarHorarioConfirmado() {\n      if (this.horarioAEliminar) {\n        custom_axios.delete(`/apiv1/horariomateria/${this.horarioAEliminar.id}`).then(response => {\n          if (response.status === 200) {\n            this.todosLosHorarios();\n            this.mostrarConfirmacion = false;\n          }\n        }).catch(error => {\n          console.error('Error eliminando horario:', error);\n        });\n      }\n    }\n  },\n  created() {\n    this.todosLosHorarios();\n  }\n};","map":{"version":3,"names":["custom_axios","AbmHorarioMateria","components","data","headers","text","value","sortable","listadoHorarios","mostrarAbmHorarioMateria","mostrarConfirmacion","horarioSeleccionado","horarioAEliminar","editar","methods","todosLosHorarios","get","then","response","status","horarios","promises","map","horario","id_materia","result","materia","nombre","Promise","all","updatedHorarios","catch","error","console","abrirAbmHorarioMateria","cancelarAbmHorarioMateria","guardarAbmHorarioMateria","confirmarEliminarHorario","eliminarHorarioConfirmado","delete","id","created"],"sources":["src/components/ListadoHorarioMateria.vue"],"sourcesContent":["<template>\n    <div>\n      <v-btn color=\"primary\" @click=\"abrirAbmHorarioMateria(false)\">Agregar Horario de Materia</v-btn>\n  \n      <v-data-table\n        :headers=\"headers\"\n        :items=\"listadoHorarios\"\n        height=\"400\"\n        item-value=\"id\"\n      >\n        <template v-slot:item.actions=\"{ item }\">\n          <v-icon @click=\"abrirAbmHorarioMateria(true, item)\" class=\"mr-2\">mdi-pencil</v-icon>\n          <v-icon @click=\"confirmarEliminarHorario(item)\" class=\"ml-2\">mdi-delete</v-icon>\n        </template>\n      </v-data-table>\n  \n      <v-dialog v-model=\"mostrarAbmHorarioMateria\" max-width=\"500px\" persistent>\n        <AbmHorarioMateria\n          :horario=\"horarioSeleccionado\"\n          :editar=\"editar\"\n          @guardar=\"guardarAbmHorarioMateria\"\n          @cancelar=\"cancelarAbmHorarioMateria\"\n        />\n      </v-dialog>\n  \n      <v-dialog v-model=\"mostrarConfirmacion\" max-width=\"500px\">\n        <v-card>\n          <v-card-title class=\"headline\">Confirmar Eliminación</v-card-title>\n          <v-card-text>¿Está seguro de que desea eliminar el horario de materia?</v-card-text>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"green darken-1\" text @click=\"mostrarConfirmacion = false\">Cancelar</v-btn>\n            <v-btn color=\"red darken-1\" text @click=\"eliminarHorarioConfirmado\">Eliminar</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n  </template>\n  \n  <script>\n  import custom_axios from '../plugins/axios.js';\n  import AbmHorarioMateria from './AbmHorarioMateria.vue';\n  \n  export default {\n    components: {\n      AbmHorarioMateria,\n    },\n    data() {\n      return {\n        headers: [\n          { text: 'ID', value: 'id' },\n          { text: 'Materia', value: 'materia' },\n          { text: 'Desde', value: 'fh_desde' },\n          { text: 'Hasta', value: 'fh_hasta' },\n          { text: 'Acciones', value: 'actions', sortable: false },\n        ],\n        listadoHorarios: [],\n        mostrarAbmHorarioMateria: false,\n        mostrarConfirmacion: false,\n        horarioSeleccionado: {},\n        horarioAEliminar: null,\n        editar: false,\n      };\n    },\n    methods: {\n      todosLosHorarios() {\n        custom_axios\n          .get('/apiv1/horariomateria')\n          .then(response => {\n            if (response.status === 200) {\n              const horarios = response.data;\n              const promises = horarios.map(horario => {\n                return custom_axios.get(`/apiv1/materia/${horario.id_materia}`)\n                  .then(result => ({\n                    ...horario,\n                    materia: result.data.nombre,\n                  }));\n              });\n  \n              Promise.all(promises)\n                .then(updatedHorarios => {\n                  this.listadoHorarios = updatedHorarios;\n                })\n                .catch(error => {\n                  console.error('Error obteniendo nombres de materias:', error);\n                });\n            }\n          })\n          .catch(error => {\n            console.error('Error obteniendo horarios:', error);\n          });\n      },\n      abrirAbmHorarioMateria(editar, horario = null) {\n        this.editar = editar;\n        this.horarioSeleccionado = horario ? { ...horario } : {};\n        this.mostrarAbmHorarioMateria = true;\n      },\n      cancelarAbmHorarioMateria() {\n        this.mostrarAbmHorarioMateria = false;\n      },\n      guardarAbmHorarioMateria() {\n        this.mostrarAbmHorarioMateria = false;\n        this.todosLosHorarios();\n      },\n      confirmarEliminarHorario(horario) {\n        this.horarioAEliminar = horario;\n        this.mostrarConfirmacion = true;\n      },\n      eliminarHorarioConfirmado() {\n        if (this.horarioAEliminar) {\n          custom_axios\n            .delete(`/apiv1/horariomateria/${this.horarioAEliminar.id}`)\n            .then(response => {\n              if (response.status === 200) {\n                this.todosLosHorarios();\n                this.mostrarConfirmacion = false;\n              }\n            })\n            .catch(error => {\n              console.error('Error eliminando horario:', error);\n            });\n        }\n      },\n    },\n    created() {\n      this.todosLosHorarios();\n    },\n  };\n  </script>\n  \n  <style scoped>\n  .mr-2 {\n    margin-right: 8px;\n  }\n  .ml-2 {\n    margin-left: 8px;\n  }\n  </style>\n  "],"mappings":"AAwCA,OAAAA,YAAA;AACA,OAAAC,iBAAA;AAEA;EACAC,UAAA;IACAD;EACA;EACAE,KAAA;IACA;MACAC,OAAA,GACA;QAAAC,IAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,KAAA;QAAAC,QAAA;MAAA,EACA;MACAC,eAAA;MACAC,wBAAA;MACAC,mBAAA;MACAC,mBAAA;MACAC,gBAAA;MACAC,MAAA;IACA;EACA;EACAC,OAAA;IACAC,iBAAA;MACAf,YAAA,CACAgB,GAAA,0BACAC,IAAA,CAAAC,QAAA;QACA,IAAAA,QAAA,CAAAC,MAAA;UACA,MAAAC,QAAA,GAAAF,QAAA,CAAAf,IAAA;UACA,MAAAkB,QAAA,GAAAD,QAAA,CAAAE,GAAA,CAAAC,OAAA;YACA,OAAAvB,YAAA,CAAAgB,GAAA,mBAAAO,OAAA,CAAAC,UAAA,IACAP,IAAA,CAAAQ,MAAA;cACA,GAAAF,OAAA;cACAG,OAAA,EAAAD,MAAA,CAAAtB,IAAA,CAAAwB;YACA;UACA;UAEAC,OAAA,CAAAC,GAAA,CAAAR,QAAA,EACAJ,IAAA,CAAAa,eAAA;YACA,KAAAtB,eAAA,GAAAsB,eAAA;UACA,GACAC,KAAA,CAAAC,KAAA;YACAC,OAAA,CAAAD,KAAA,0CAAAA,KAAA;UACA;QACA;MACA,GACAD,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,+BAAAA,KAAA;MACA;IACA;IACAE,uBAAArB,MAAA,EAAAU,OAAA;MACA,KAAAV,MAAA,GAAAA,MAAA;MACA,KAAAF,mBAAA,GAAAY,OAAA;QAAA,GAAAA;MAAA;MACA,KAAAd,wBAAA;IACA;IACA0B,0BAAA;MACA,KAAA1B,wBAAA;IACA;IACA2B,yBAAA;MACA,KAAA3B,wBAAA;MACA,KAAAM,gBAAA;IACA;IACAsB,yBAAAd,OAAA;MACA,KAAAX,gBAAA,GAAAW,OAAA;MACA,KAAAb,mBAAA;IACA;IACA4B,0BAAA;MACA,SAAA1B,gBAAA;QACAZ,YAAA,CACAuC,MAAA,+BAAA3B,gBAAA,CAAA4B,EAAA,IACAvB,IAAA,CAAAC,QAAA;UACA,IAAAA,QAAA,CAAAC,MAAA;YACA,KAAAJ,gBAAA;YACA,KAAAL,mBAAA;UACA;QACA,GACAqB,KAAA,CAAAC,KAAA;UACAC,OAAA,CAAAD,KAAA,8BAAAA,KAAA;QACA;MACA;IACA;EACA;EACAS,QAAA;IACA,KAAA1B,gBAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}