{"ast":null,"code":"import custom_axios from '../plugins/axios.js';\nexport default {\n  props: {\n    horario: {\n      type: Object,\n      default: () => ({\n        id: \"\",\n        id_materia: \"\",\n        fh_desde: \"\",\n        fh_hasta: \"\",\n        observacion: \"\"\n      })\n    },\n    editar: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      valid: false,\n      horarioData: {\n        id_materia: \"\",\n        fh_desde: \"\",\n        fh_hasta: \"\",\n        observacion: \"\"\n      },\n      fechaDesde: \"\",\n      horaDesde: \"\",\n      fechaHasta: \"\",\n      horaHasta: \"\",\n      materias: [],\n      materiaRules: [v => !!v || 'La materia es requerida'],\n      fechaDesdeRules: [v => !!v || 'La fecha de inicio es requerida'],\n      fechaHastaRules: [v => !!v || 'La fecha de fin es requerida'],\n      horaRules: [v => !!v || 'La hora es requerida'],\n      observacionRules: [],\n      menuDesde: false,\n      menuHasta: false,\n      materiasLoading: false,\n      materiasError: ''\n    };\n  },\n  watch: {\n    horario: {\n      handler(nuevoValor) {\n        this.horarioData = {\n          ...nuevoValor\n        };\n        if (this.horarioData.fh_desde) {\n          const desde = new Date(this.horarioData.fh_desde);\n          this.fechaDesde = this.formatDate(desde);\n          this.horaDesde = this.formatTime(desde);\n        }\n        if (this.horarioData.fh_hasta) {\n          const hasta = new Date(this.horarioData.fh_hasta);\n          this.fechaHasta = this.formatDate(hasta);\n          this.horaHasta = this.formatTime(hasta);\n        }\n        if (!this.editar) {\n          this.resetValidation();\n        }\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  methods: {\n    formatDate(date) {\n      if (!date) return null;\n      const d = new Date(date);\n      return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`;\n    },\n    formatTime(date) {\n      if (!date) return null;\n      const d = new Date(date);\n      return `${String(d.getHours()).padStart(2, '0')}:${String(d.getMinutes()).padStart(2, '0')}`;\n    },\n    updateDateTime() {\n      this.horarioData.fh_desde = `${this.fechaDesde}T${this.horaDesde}:00`;\n      this.horarioData.fh_hasta = `${this.fechaHasta}T${this.horaHasta}:00`;\n    },\n    submit() {\n      this.$refs.form.validate();\n      if (this.valid) {\n        this.updateDateTime();\n        if (this.editar) {\n          this.editarHorario();\n        } else {\n          this.guardarHorario();\n        }\n      }\n    },\n    guardarHorario() {\n      custom_axios.post('/apiv1/horariomateria', this.horarioData).then(response => {\n        this.$emit('guardar');\n        this.$emit('cerrar');\n      }).catch(error => {\n        console.error('Error guardando horario:', error);\n      });\n    },\n    editarHorario() {\n      custom_axios.patch(`/apiv1/horariomateria/${this.horarioData.id}`, this.horarioData).then(response => {\n        this.$emit('guardar');\n        this.$emit('cerrar');\n        this.$emit('actualizar');\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n    cancelar() {\n      this.$emit('cancelar');\n    },\n    resetValidation() {\n      if (this.$refs.form) {\n        this.$refs.form.resetValidation();\n      }\n    },\n    obtenerMaterias() {\n      this.materiasLoading = true;\n      this.materiasError = '';\n      custom_axios.get('/apiv1/materia').then(response => {\n        this.materias = response.data;\n      }).catch(error => {\n        this.materiasError = 'Error obteniendo materias';\n        console.error('Error obteniendo materias:', error);\n      }).finally(() => {\n        this.materiasLoading = false;\n      });\n    },\n    focusInput(ref) {\n      this.$nextTick(() => {\n        if (this.$refs[ref]) {\n          this.$refs[ref].focus();\n        }\n      });\n    }\n  },\n  created() {\n    this.obtenerMaterias();\n    if (this.horario) {\n      this.horarioData = {\n        ...this.horario\n      };\n    }\n  }\n};","map":{"version":3,"names":["custom_axios","props","horario","type","Object","default","id","id_materia","fh_desde","fh_hasta","observacion","editar","Boolean","data","valid","horarioData","fechaDesde","horaDesde","fechaHasta","horaHasta","materias","materiaRules","v","fechaDesdeRules","fechaHastaRules","horaRules","observacionRules","menuDesde","menuHasta","materiasLoading","materiasError","watch","handler","nuevoValor","desde","Date","formatDate","formatTime","hasta","resetValidation","deep","immediate","methods","date","d","getFullYear","String","getMonth","padStart","getDate","getHours","getMinutes","updateDateTime","submit","$refs","form","validate","editarHorario","guardarHorario","post","then","response","$emit","catch","error","console","patch","cancelar","obtenerMaterias","get","finally","focusInput","ref","$nextTick","focus","created"],"sources":["src/components/AbmHorarioMateria.vue"],"sourcesContent":["<template>\n  <v-form ref=\"form\" v-model=\"valid\" @submit.prevent=\"submit\">\n    <v-card>\n      <v-card-title>{{ editar ? 'Editar Horario de Materia' : 'Agregar Horario de Materia' }}</v-card-title>\n      <v-card-text>\n        <v-select\n          v-model=\"horarioData.id_materia\"\n          :items=\"materias\"\n          item-text=\"nombre\"\n          item-value=\"id\"\n          label=\"Materia\"\n          :rules=\"materiaRules\"\n          required\n        ></v-select>\n        \n        <v-row>\n          <v-col cols=\"12\" sm=\"6\">\n            <v-menu\n              v-model=\"menuDesde\"\n              :close-on-content-click=\"false\"\n              transition=\"scale-transition\"\n              offset-y\n              min-width=\"290px\"\n            >\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-text-field\n                  v-model=\"fechaDesde\"\n                  label=\"Fecha de Inicio\"\n                  prepend-icon=\"mdi-calendar\"\n                  readonly\n                  v-bind=\"attrs\"\n                  v-on=\"on\"\n                  :rules=\"fechaDesdeRules\"\n                  required\n                ></v-text-field>\n              </template>\n              <v-date-picker v-model=\"fechaDesde\" @input=\"menuDesde = false\"></v-date-picker>\n            </v-menu>\n          </v-col>\n          <v-col cols=\"12\" sm=\"6\">\n            <v-text-field\n              v-model=\"horaDesde\"\n              label=\"Hora de Inicio\"\n              type=\"time\"\n              prepend-icon=\"mdi-clock-outline\"\n              :rules=\"horaRules\"\n              required\n              @click=\"focusInput('horaDesde')\"\n            ></v-text-field>\n          </v-col>\n        </v-row>\n        <v-row>\n          <v-col cols=\"12\" sm=\"6\">\n            <v-menu\n              v-model=\"menuHasta\"\n              :close-on-content-click=\"false\"\n              transition=\"scale-transition\"\n              offset-y\n              min-width=\"290px\"\n            >\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-text-field\n                  v-model=\"fechaHasta\"\n                  label=\"Fecha de Fin\"\n                  prepend-icon=\"mdi-calendar\"\n                  readonly\n                  v-bind=\"attrs\"\n                  v-on=\"on\"\n                  :rules=\"fechaHastaRules\"\n                  required\n                ></v-text-field>\n              </template>\n              <v-date-picker v-model=\"fechaHasta\" @input=\"menuHasta = false\"></v-date-picker>\n            </v-menu>\n          </v-col>\n          <v-col cols=\"12\" sm=\"6\">\n            <v-text-field\n              v-model=\"horaHasta\"\n              label=\"Hora de Fin\"\n              type=\"time\"\n              prepend-icon=\"mdi-clock-outline\"\n              :rules=\"horaRules\"\n              required\n              @click=\"focusInput('horaHasta')\"\n            ></v-text-field>\n          </v-col>\n        </v-row>\n  \n        <v-text-field\n          v-model=\"horarioData.observacion\"\n          label=\"Observaciones\"\n          :rules=\"observacionRules\"\n        ></v-text-field>\n      </v-card-text>\n      <v-card-actions>\n        <v-btn color=\"primary\" @click=\"submit\" :disabled=\"!valid\">Guardar</v-btn>\n        <v-btn color=\"secondary\" @click=\"cancelar\">Cancelar</v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-form>\n</template>\n\n<script>\nimport custom_axios from '../plugins/axios.js';\n\nexport default {\n  props: {\n    horario: {\n      type: Object,\n      default: () => ({ id: \"\", id_materia: \"\", fh_desde: \"\", fh_hasta: \"\", observacion: \"\" }),\n    },\n    editar: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      valid: false,\n      horarioData: {\n        id_materia: \"\",\n        fh_desde: \"\",\n        fh_hasta: \"\",\n        observacion: \"\",\n      },\n      fechaDesde: \"\",\n      horaDesde: \"\",\n      fechaHasta: \"\",\n      horaHasta: \"\",\n      materias: [],\n      materiaRules: [(v) => !!v || 'La materia es requerida'],\n      fechaDesdeRules: [(v) => !!v || 'La fecha de inicio es requerida'],\n      fechaHastaRules: [(v) => !!v || 'La fecha de fin es requerida'],\n      horaRules: [(v) => !!v || 'La hora es requerida'],\n      observacionRules: [],\n      menuDesde: false,\n      menuHasta: false,\n      materiasLoading: false,\n      materiasError: '',\n    };\n  },\n  watch: {\n    horario: {\n      handler(nuevoValor) {\n        this.horarioData = { ...nuevoValor };\n        if (this.horarioData.fh_desde) {\n          const desde = new Date(this.horarioData.fh_desde);\n          this.fechaDesde = this.formatDate(desde);\n          this.horaDesde = this.formatTime(desde);\n        }\n        if (this.horarioData.fh_hasta) {\n          const hasta = new Date(this.horarioData.fh_hasta);\n          this.fechaHasta = this.formatDate(hasta);\n          this.horaHasta = this.formatTime(hasta);\n        }\n        if (!this.editar) {\n          this.resetValidation();\n        }\n      },\n      deep: true,\n      immediate: true,\n    }\n  },\n  methods: {\n    formatDate(date) {\n      if (!date) return null;\n      const d = new Date(date);\n      return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`;\n    },\n    formatTime(date) {\n      if (!date) return null;\n      const d = new Date(date);\n      return `${String(d.getHours()).padStart(2, '0')}:${String(d.getMinutes()).padStart(2, '0')}`;\n    },\n    updateDateTime() {\n      this.horarioData.fh_desde = `${this.fechaDesde}T${this.horaDesde}:00`;\n      this.horarioData.fh_hasta = `${this.fechaHasta}T${this.horaHasta}:00`;\n    },\n    submit() {\n      this.$refs.form.validate();\n      if (this.valid) {\n        this.updateDateTime();\n        if (this.editar) {\n          this.editarHorario();\n        } else {\n          this.guardarHorario();\n        }\n      }\n    },\n    guardarHorario() {\n      custom_axios\n        .post('/apiv1/horariomateria', this.horarioData)\n        .then((response) => {\n          this.$emit('guardar');\n          this.$emit('cerrar');\n        })\n        .catch((error) => {\n          console.error('Error guardando horario:', error);\n        });\n    },\n    editarHorario() {\n      custom_axios\n        .patch(`/apiv1/horariomateria/${this.horarioData.id}`, this.horarioData)\n        .then((response) => {\n          this.$emit('guardar');\n          this.$emit('cerrar');\n          this.$emit('actualizar');\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    cancelar() {\n      this.$emit('cancelar');\n    },\n    resetValidation() {\n      if (this.$refs.form) {\n        this.$refs.form.resetValidation();\n      }\n    },\n    obtenerMaterias() {\n      this.materiasLoading = true;\n      this.materiasError = '';\n      custom_axios\n        .get('/apiv1/materia')\n        .then((response) => {\n          this.materias = response.data;\n        })\n        .catch((error) => {\n          this.materiasError = 'Error obteniendo materias';\n          console.error('Error obteniendo materias:', error);\n        })\n        .finally(() => {\n          this.materiasLoading = false;\n        });\n    },\n    focusInput(ref) {\n      this.$nextTick(() => {\n        if (this.$refs[ref]) {\n          this.$refs[ref].focus();\n        }\n      });\n    }\n  },\n  created() {\n    this.obtenerMaterias();\n    if (this.horario) {\n      this.horarioData = { ...this.horario };\n    }\n  },\n};\n</script>\n\n<style scoped>\n.mr-2 {\n  margin-right: 8px;\n}\n.ml-2 {\n  margin-left: 8px;\n}\n</style>\n"],"mappings":"AAuGA,OAAAA,YAAA;AAEA;EACAC,KAAA;IACAC,OAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA,EAAAA,CAAA;QAAAC,EAAA;QAAAC,UAAA;QAAAC,QAAA;QAAAC,QAAA;QAAAC,WAAA;MAAA;IACA;IACAC,MAAA;MACAR,IAAA,EAAAS,OAAA;MACAP,OAAA;IACA;EACA;EACAQ,KAAA;IACA;MACAC,KAAA;MACAC,WAAA;QACAR,UAAA;QACAC,QAAA;QACAC,QAAA;QACAC,WAAA;MACA;MACAM,UAAA;MACAC,SAAA;MACAC,UAAA;MACAC,SAAA;MACAC,QAAA;MACAC,YAAA,GAAAC,CAAA,MAAAA,CAAA;MACAC,eAAA,GAAAD,CAAA,MAAAA,CAAA;MACAE,eAAA,GAAAF,CAAA,MAAAA,CAAA;MACAG,SAAA,GAAAH,CAAA,MAAAA,CAAA;MACAI,gBAAA;MACAC,SAAA;MACAC,SAAA;MACAC,eAAA;MACAC,aAAA;IACA;EACA;EACAC,KAAA;IACA7B,OAAA;MACA8B,QAAAC,UAAA;QACA,KAAAlB,WAAA;UAAA,GAAAkB;QAAA;QACA,SAAAlB,WAAA,CAAAP,QAAA;UACA,MAAA0B,KAAA,OAAAC,IAAA,MAAApB,WAAA,CAAAP,QAAA;UACA,KAAAQ,UAAA,QAAAoB,UAAA,CAAAF,KAAA;UACA,KAAAjB,SAAA,QAAAoB,UAAA,CAAAH,KAAA;QACA;QACA,SAAAnB,WAAA,CAAAN,QAAA;UACA,MAAA6B,KAAA,OAAAH,IAAA,MAAApB,WAAA,CAAAN,QAAA;UACA,KAAAS,UAAA,QAAAkB,UAAA,CAAAE,KAAA;UACA,KAAAnB,SAAA,QAAAkB,UAAA,CAAAC,KAAA;QACA;QACA,UAAA3B,MAAA;UACA,KAAA4B,eAAA;QACA;MACA;MACAC,IAAA;MACAC,SAAA;IACA;EACA;EACAC,OAAA;IACAN,WAAAO,IAAA;MACA,KAAAA,IAAA;MACA,MAAAC,CAAA,OAAAT,IAAA,CAAAQ,IAAA;MACA,UAAAC,CAAA,CAAAC,WAAA,MAAAC,MAAA,CAAAF,CAAA,CAAAG,QAAA,QAAAC,QAAA,YAAAF,MAAA,CAAAF,CAAA,CAAAK,OAAA,IAAAD,QAAA;IACA;IACAX,WAAAM,IAAA;MACA,KAAAA,IAAA;MACA,MAAAC,CAAA,OAAAT,IAAA,CAAAQ,IAAA;MACA,UAAAG,MAAA,CAAAF,CAAA,CAAAM,QAAA,IAAAF,QAAA,YAAAF,MAAA,CAAAF,CAAA,CAAAO,UAAA,IAAAH,QAAA;IACA;IACAI,eAAA;MACA,KAAArC,WAAA,CAAAP,QAAA,WAAAQ,UAAA,SAAAC,SAAA;MACA,KAAAF,WAAA,CAAAN,QAAA,WAAAS,UAAA,SAAAC,SAAA;IACA;IACAkC,OAAA;MACA,KAAAC,KAAA,CAAAC,IAAA,CAAAC,QAAA;MACA,SAAA1C,KAAA;QACA,KAAAsC,cAAA;QACA,SAAAzC,MAAA;UACA,KAAA8C,aAAA;QACA;UACA,KAAAC,cAAA;QACA;MACA;IACA;IACAA,eAAA;MACA1D,YAAA,CACA2D,IAAA,+BAAA5C,WAAA,EACA6C,IAAA,CAAAC,QAAA;QACA,KAAAC,KAAA;QACA,KAAAA,KAAA;MACA,GACAC,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,6BAAAA,KAAA;MACA;IACA;IACAP,cAAA;MACAzD,YAAA,CACAkE,KAAA,+BAAAnD,WAAA,CAAAT,EAAA,SAAAS,WAAA,EACA6C,IAAA,CAAAC,QAAA;QACA,KAAAC,KAAA;QACA,KAAAA,KAAA;QACA,KAAAA,KAAA;MACA,GACAC,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,CAAAA,KAAA;MACA;IACA;IACAG,SAAA;MACA,KAAAL,KAAA;IACA;IACAvB,gBAAA;MACA,SAAAe,KAAA,CAAAC,IAAA;QACA,KAAAD,KAAA,CAAAC,IAAA,CAAAhB,eAAA;MACA;IACA;IACA6B,gBAAA;MACA,KAAAvC,eAAA;MACA,KAAAC,aAAA;MACA9B,YAAA,CACAqE,GAAA,mBACAT,IAAA,CAAAC,QAAA;QACA,KAAAzC,QAAA,GAAAyC,QAAA,CAAAhD,IAAA;MACA,GACAkD,KAAA,CAAAC,KAAA;QACA,KAAAlC,aAAA;QACAmC,OAAA,CAAAD,KAAA,+BAAAA,KAAA;MACA,GACAM,OAAA;QACA,KAAAzC,eAAA;MACA;IACA;IACA0C,WAAAC,GAAA;MACA,KAAAC,SAAA;QACA,SAAAnB,KAAA,CAAAkB,GAAA;UACA,KAAAlB,KAAA,CAAAkB,GAAA,EAAAE,KAAA;QACA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAP,eAAA;IACA,SAAAlE,OAAA;MACA,KAAAa,WAAA;QAAA,QAAAb;MAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}